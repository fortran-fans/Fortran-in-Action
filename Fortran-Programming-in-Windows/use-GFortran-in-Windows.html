<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>åœ¨Windowsç³»ç»Ÿä¸‹ä½¿ç”¨GFortran - fortran-best-practices</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/introduction.html"><strong aria-hidden="true">1.</strong> Fortranæœ€ä½³å®è·µ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/fortran-style-guide.html"><strong aria-hidden="true">1.1.</strong> Fortrané£æ ¼æŒ‡å¯¼</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/floating-point-numbers.html"><strong aria-hidden="true">1.2.</strong> æµ®ç‚¹æ•°</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/integer-division.html"><strong aria-hidden="true">1.3.</strong> æ•´æ•°é™¤æ³•</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/modules-programs.html"><strong aria-hidden="true">1.4.</strong> æ¨¡å—</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/arrays.html"><strong aria-hidden="true">1.5.</strong> æ•°ç»„</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/multidim-arrays.html"><strong aria-hidden="true">1.6.</strong> é«˜ç»´æ•°ç»„</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/element-operation.html"><strong aria-hidden="true">1.7.</strong> é€å…ƒæ“ä½œ</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/allocatable-arrays.html"><strong aria-hidden="true">1.8.</strong> å¯åˆ†é…æ•°ç»„</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/file-io.html"><strong aria-hidden="true">1.9.</strong> æ–‡ä»¶io</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/callbacks.html"><strong aria-hidden="true">1.10.</strong> å›è°ƒå‡½æ•°</a></li><li class="chapter-item expanded "><a href="../Fortran-Best-Practices/type-casting.html"><strong aria-hidden="true">1.11.</strong> ç±»å‹è½¬æ¢</a></li></ol></li><li class="chapter-item expanded "><a href="../Fortran-Programming-in-Windows/index.html"><strong aria-hidden="true">2.</strong> åœ¨Windowsç³»ç»Ÿä¸‹è¿›è¡ŒFortranç¼–ç¨‹</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Fortran-Programming-in-Windows/Path-in-Windows.html"><strong aria-hidden="true">2.1.</strong> Windowsç³»ç»Ÿçš„ç¯å¢ƒè·¯å¾„</a></li><li class="chapter-item expanded "><a href="../Fortran-Programming-in-Windows/use-GFortran-in-Windows.html" class="active"><strong aria-hidden="true">2.2.</strong> åœ¨Windowsç³»ç»Ÿä¸‹ä½¿ç”¨GFortran</a></li><li class="chapter-item expanded "><a href="../Fortran-Programming-in-Windows/use-OneAPI-in-Windows.html"><strong aria-hidden="true">2.3.</strong> åœ¨Windowsç³»ç»Ÿä¸‹ä½¿ç”¨OneAPIå¥—ä»¶</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">fortran-best-practices</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/fortran-fans/mdbook-test/tree/main/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                                        <a href="https://github.com/fortran-fans/mdbook-test/edit/main/src/Fortran-Programming-in-Windows/use-GFortran-in-Windows.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="åœ¨windowsç³»ç»Ÿä¸‹ä½¿ç”¨gfortran"><a class="header" href="#åœ¨windowsç³»ç»Ÿä¸‹ä½¿ç”¨gfortran">åœ¨Windowsç³»ç»Ÿä¸‹ä½¿ç”¨GFortran</a></h1>
<p>å¾®è½¯å…¬å¸å¼€å‘çš„Windowsç³»ç»Ÿå…·æœ‰å¼ºå¤§çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ğŸ¨ï¼Œæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ“ä½œç³»ç»Ÿã€‚<br>
GCC Fortranç¼–è¯‘å™¨ï¼Œå¯¹Fortranæ–°æ ‡å‡†çš„æ”¯æŒéå¸¸åŠæ—¶ï¼Œæ˜¯ä¸€æ¬¾å…è´¹ğŸ»çš„å¼€æºè½¯ä»¶ã€‚</p>
<blockquote>
<p>ğŸ”° æç¤ºï¼šä»¥ä¸‹æ•™ç¨‹ï¼ŒåŒæ ·é€‚ç”¨äºåœ¨<strong>Visual Studio Code</strong>ä¸­ä½¿ç”¨Intel OneAPIï¼ˆéœ€è¦åšå‡ºé€‚åº”æ€§æ”¹å˜ï¼šgfortranæ”¹ä¸ºifortï¼‰ã€‚å®‰è£…OneAPIè¯·å‚è€ƒ<a href="use-OneAPI-in-Windows.html#%E5%AE%89%E8%A3%85oneapi%E7%9A%84%E7%8B%AC%E7%AB%8B%E7%BB%84%E4%BB%B6%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E6%A1%88">å®‰è£…OneAPIçš„ç‹¬ç«‹ç»„ä»¶ï¼ˆç¬¬äºŒç§æ–¹æ¡ˆï¼‰</a>ã€‚</p>
</blockquote>
<h2 id="ä½¿ç”¨msys2-gfortran"><a class="header" href="#ä½¿ç”¨msys2-gfortran">ä½¿ç”¨MSYS2-GFortran</a></h2>
<p>å¯ä»¥å°†MSYS2ç®€å•åœ°ç†è§£ä¸ºä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œé›†æˆäº†<code>pacman</code>å’Œ<a href="https://sourceforge.net/projects/mingw/"><code>Mingw-w64</code></a>ã€‚</p>
<h3 id="å®‰è£…msys2è½¯ä»¶"><a class="header" href="#å®‰è£…msys2è½¯ä»¶">å®‰è£…MSYS2è½¯ä»¶</a></h3>
<p>å‰å¾€<a href="https://www.msys2.org/">MSYS2é¡¹ç›®å®˜æ–¹ç½‘ç«™</a>ğŸ“¡ï¼Œç‚¹å‡»å›¾ç¤ºç®­å¤´æŒ‡å‘çš„é“¾æ¥ï¼Œä¸‹è½½MSYS2è½¯ä»¶ï¼Œé˜…è¯»ç½‘é¡µæä¾›çš„<a href="https://www.msys2.org/wiki/Home/">å®‰è£…æ•™ç¨‹è¿›è¡Œå®‰è£…å’Œä½¿ç”¨</a>ğŸ“œã€‚</p>
<img src="images/MSYS2-Main-Page.png" alt="MSYS2ä¸»é¡µæˆªå›¾" style="zoom:50%;" />
<p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨MSYS2è½¯ä»¶çš„è¿‡ç¨‹ä¸­é‡åˆ°å›°éš¾æˆ–è€…è½¯ä»¶æ¼æ´æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘<a href="https://github.com/msys2/msys2.github.io/issues">MSYS2é¡¹ç›®çš„GitHubä»“åº“çš„è®®é¢˜</a>ğŸ¯å¯»æ±‚å¸®åŠ©ã€‚</p>
<h3 id="å®‰è£…msys2-gfortranè½¯ä»¶"><a class="header" href="#å®‰è£…msys2-gfortranè½¯ä»¶">å®‰è£…MSYS2-GFortranè½¯ä»¶</a></h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç†Ÿæ‚‰ä¸€ä¸‹MSYS2è½¯ä»¶çš„å‘½ä»¤è¡ŒåŸºç¡€æ“ä½œğŸ•¹ï¼Œè¿™åœ¨MSYS2é¡¹ç›®å®˜æ–¹æä¾›çš„æ–‡æ¡£ä¸­èƒ½æ‰¾åˆ°ï¼š</p>
<pre><code class="language-sh">pacman -Syu                  # å‡çº§msys2å†…éƒ¨ç»„ä»¶å’Œä»“åº“ä¿¡æ¯
pacman -Ss &lt;package_name&gt;    # æœç´¢è½¯ä»¶
pacman -S  &lt;package_name&gt;    # å®‰è£…è½¯ä»¶
pacman -Qs &lt;package_name&gt;    # æŸ¥è¯¢æœ¬åœ°å®‰è£…çš„ç‰¹å®šè½¯ä»¶
pacman -Rs &lt;package_name&gt;    # å¸è½½è½¯ä»¶
pacman -R --help             # æŸ¥è¯¢å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£
...
</code></pre>
<p>è¯·åŠ¡å¿…çµæ´»ğŸ“ä½¿ç”¨MSYS2è½¯ä»¶ï¼Œè¯¥è½¯ä»¶åœ¨è¿è¡Œå‰æœ‰ä¸€äº›ä¸ªæ€§åŒ–çš„é…ç½®æ–‡ä»¶å¯ä»¥è®¾ç½®ï¼Œå½“ç„¶ä¿æŒé»˜è®¤ä¹Ÿæ˜¯ä¸é”™çš„ã€‚<br>ç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼åœ¨MSYS2è½¯ä»¶ä¸­å®‰è£…GFortranï¼š</p>
<pre><code class="language-sh">pacman -Ss fortran           # æŸ¥è¯¢åå­—ä¸­å«â€œFortranâ€å­—ç¬¦çš„åŒ…
pacman -S  ucrt64/mingw-w64-ucrt-x86_64-gcc-fortran    # å®‰è£…ucrt64ç‰ˆæœ¬çš„gfortran
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨MSYS2è½¯ä»¶ï¼Œä¸‹è½½<code>GNU Make/CMake/openBLAS/Python/Golang/...</code>ç­‰ä¸°å¯Œçš„è½¯ä»¶æˆ–è€…é“¾æ¥åº“ã€‚GCC WIKIä¸ºæˆ‘ä»¬æä¾›äº†<a href="https://gcc.gnu.org/wiki/GFortran">ä¸€äº›GFortrançš„ä¿¡æ¯æ–‡æ¡£</a>ï¼Œå…¶ä¸­å°±æœ‰<a href="https://gcc.gnu.org/onlinedocs/gfortran.pdf">GFortranæœ€æ–°çš„å¸®åŠ©æ–‡æ¡£</a>ã€‚</p>
<pre><code class="language-sh">gfortran &lt;name&gt;.f90          # ç¼–è¯‘fortranæºä»£ç æ–‡ä»¶
gfortran --help              # æŸ¥è¯¢gfortranå‘½ä»¤è¡Œå‚æ•°çš„å¸®åŠ©æ–‡æ¡£
...
</code></pre>
<p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ›´æ”¹MSYS2è½¯ä»¶çš„å®‰è£…è·¯å¾„ï¼Œåˆ™å®‰è£…çš„GFortranè½¯ä»¶åº”è¯¥æ˜¯åœ¨<code>C:\msys64</code>è·¯å¾„ä¸‹çš„ç‰¹å®šç¯å¢ƒçš„å­æ–‡ä»¶ä¸‹ï¼Œæˆ‘ä»¬æœ€å¥½å°†å®ƒå¼•å…¥åˆ°Windowsè½¯ä»¶çš„çš„ç¯å¢ƒè·¯å¾„ğŸ”—ä¸­ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨å®ƒï¼ˆgfortran.exeï¼‰ã€‚ä¾‹å¦‚è·¯å¾„ï¼Œ</p>
<pre><code class="language-sh">C:/msys64/ucrt64/bin         # äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œç¨‹åºæ‰€åœ¨è·¯å¾„
C:/msys64/ucrt64/lib         # å¯æ‰§è¡Œç¨‹åºçš„åŠ¨æ€é“¾æ¥åº“ä¾èµ–æ‰€åœ¨è·¯å¾„
</code></pre>
<blockquote>
<p>ğŸ”° æç¤ºï¼šè¿™é‡Œé»˜è®¤æˆ‘ä»¬ç°åœ¨å¤§å¤šæ•°ä½¿ç”¨çš„ç¡¬ä»¶æ˜¯64ä½çš„ï¼Œä¸”ä½¿ç”¨è¾ƒæ–°çš„MSYS2ç¯å¢ƒï¼ˆUCRTï¼‰ï¼Œæœ‰ä¸ªæ€§åŒ–éœ€æ±‚å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ã€‚</p>
</blockquote>
<h2 id="ä½¿ç”¨visul-studio-codeç¼–è¾‘å™¨è¿›è¡Œç¼–ç "><a class="header" href="#ä½¿ç”¨visul-studio-codeç¼–è¾‘å™¨è¿›è¡Œç¼–ç ">ä½¿ç”¨Visul Studio Codeç¼–è¾‘å™¨è¿›è¡Œç¼–ç </a></h2>
<p><a href="https://code.visualstudio.com/">Visual Studio Codeï¼ˆç®€ç§°ï¼ŒVS Codeæˆ–codeï¼‰</a>æ˜¯ä¸€æ¬¾ç”±å¾®è½¯å…¬å¸ä¸»å¯¼çš„å…è´¹å¼€æºã€é€æ¸å¼ºå¤§çš„ä»£ç ç¼–è¾‘å™¨è½¯ä»¶ã€‚<br>
åˆæ¬¡ä½¿ç”¨VS Codeç¼–è¾‘å™¨ï¼Œå¯ä»¥å°è¯•é˜…è¯»<a href="https://code.visualstudio.com/docs">VS Codeå¸®åŠ©æ–‡æ¡£</a>ã€‚</p>
<h3 id="æ¨èçš„vs-codeæ’ä»¶"><a class="header" href="#æ¨èçš„vs-codeæ’ä»¶">æ¨èçš„VS Codeæ’ä»¶</a></h3>
<p>é’ˆå¯¹Fortranç¼–ç¨‹ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›å¯ä»¥æ–¹ä¾¿ç‰¹å®šç¼–ç¨‹éœ€æ±‚çš„æ’ä»¶ğŸ› ï¼Œè¢«åˆ—å‡ºæ¥ä»…ä¾›å‚è€ƒï¼š</p>
<pre><code class="language-markdown">+ ä¸­æ–‡è½¯ä»¶åŒ…æ’ä»¶
+ Modern Fortran
+ Fortran IntelliSense
+ GDB Debugger - Beyond
+ VSCode Great Icons (å¯é€‰)
+ Better TOML (å¯é€‰)
</code></pre>
<h3 id="æ¨èçš„ç¼–ç¨‹æ ·å¼"><a class="header" href="#æ¨èçš„ç¼–ç¨‹æ ·å¼">æ¨èçš„ç¼–ç¨‹æ ·å¼</a></h3>
<p>ä¸ºäº†æé«˜ä»£ç çš„å¯è¯»æ€§ğŸ’¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„å•å…ƒç¼–ç¨‹æ ·å¼ï¼š</p>
<pre><code class="language-fortran">!&gt; ç›¸åŠ 
subroutine add(x, y, z)
    
    real, intent(in)  :: x, y
    real, intent(out) :: z     !! è¿”å›å€¼
    
    !&gt; åŠ æ³•
    z = x + y
    
end subroutine add
</code></pre>
<p>åœ¨åŒºå—ä»£ç å‰ä½¿ç”¨<code>!&gt;</code>æ³¨é‡Šæ ‡å¤´ä½¿å¾—VS Codeçš„Fortranæ’ä»¶èƒ½è§£ææ³¨é‡Šï¼›åœ¨å•è¡Œæ³¨é‡Šæ—¶ï¼Œæœ‰å“ä½åœ°ä½¿ç”¨<code>!&gt;</code>æˆ–<code>!!</code>å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<blockquote>
<p><code>!&gt;</code>æ³¨é‡Šæ ‡å¤´è¢«<a href="https://github.com/fortran-lang">Fortran-Langç»„ç»‡</a>ä¸<a href="https://fortran-lang.discourse.group/">ç¤¾åŒº</a>å¹¿æ³›ä½¿ç”¨ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨fpmæ„å»ºfortranä»£ç "><a class="header" href="#ä½¿ç”¨fpmæ„å»ºfortranä»£ç ">ä½¿ç”¨FPMæ„å»ºFortranä»£ç </a></h3>
<p><a href="https://github.com/fortran-lang/fpm">Fortran Package Managerï¼ˆFPMï¼‰</a>æ˜¯Fortran-Langç»„ç»‡ä¸»å¯¼ã€ä¸ºFortranè¯­è¨€ä¸“é—¨å®šåˆ¶å¼€å‘çš„å…è´¹ã€å¼€æºçš„åŒ…ç®¡ç†å™¨å’Œæ„å»ºç³»ç»Ÿã€‚</p>
<blockquote>
<p>ğŸ”° æç¤ºï¼šfortran-lang/fpmä¸ä»…æ”¯æŒGFortranï¼Œè¿˜æ”¯æŒOneAPIå’Œ<a href="https://lfortran.org/">LFortran</a>ç­‰å…¶ä»–Fortranç¼–è¯‘å™¨ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨MSYS2è½¯ä»¶æ¥å®‰è£…FPMï¼Œä¹Ÿå¯ä»¥å‰å¾€<a href="https://github.com/fortran-lang/fpm">Fortran Package Manager (fpm) (github.com)</a>ä»“åº“æ‰‹åŠ¨ç¼–è¯‘å‡ºå¯æ‰§è¡Œç¨‹åºFPMï¼Œå±Šæ—¶åŠ¡å¿…é˜…è¯»ä»“åº“æä¾›çš„å¸®åŠ©æ–‡æ¡£<a href="https://github.com/fortran-lang/fpm#readme"><code>README.md</code></a>ã€‚åˆ«å¿˜äº†å°†æ‰‹åŠ¨ç¼–è¯‘çš„FPMå¼•å…¥Windowsè½¯ä»¶çš„çš„ç¯å¢ƒè·¯å¾„ğŸ”—ä¸­ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨å®ƒï¼ˆfpm.exeï¼‰ã€‚</p>
<pre><code class="language-sh">pacman -Ss fpm              # æŸ¥è¯¢åå­—ä¸­å«â€œfpmâ€å­—ç¬¦çš„åŒ…
pacman -S ucrt64/mingw-w64-ucrt-x86_64-fpm  # å®‰è£…fpmè½¯ä»¶
</code></pre>
<p><strong>æˆ‘ä»¬æ¥æ¼”ç¤ºä¸€ä¸ªFPMé¡¹ç›®çš„åˆå§‹åŒ–ã€ç¼–å†™ã€æ„å»ºã€è¿è¡Œï¼š</strong></p>
<p>æˆ‘ä»¬å¯ä»¥æ­é…å‘½ä»¤è¡Œå·¥å…·ï¼ˆpwshã€bashï¼‰ä½¿ç”¨FPMï¼Œä¹Ÿå¯ä»¥åœ¨VS Codeæ‰“å¼€hello_worldæ–‡ä»¶å¤¹ï¼Œ<strong>æ­¤åæˆ‘ä»¬å°±å¯ä»¥ä¸“å¿ƒç¼–å†™ä»£ç äº†</strong>ğŸ’»ã€‚</p>
<pre><code class="language-sh">fpm new hello_world &amp;&amp; cd hello_world       # æ–°å»ºFPMé¡¹ç›®å¹¶åˆ‡æ¢åˆ°æ–‡ä»¶å¤¹ä¸‹: hello_world
fpm build                   # ç¼–è¯‘FPMé¡¹ç›®
fpm run                     # è¿è¡Œä¸»ç¨‹åºğŸš€
fpm test --help             # è·å–ç‰¹å®šå‘½ä»¤è¡Œå‚æ•°çš„å¸®åŠ©æ–‡æ¡£
code .                      # ä½¿ç”¨VS Codeæ‰“å¼€å½“å‰æ–‡ä»¶å¤¹
...
</code></pre>
<img src="images/hello_world-in-code.png" alt="ä½¿ç”¨VS Codeç¼–è¾‘hello_worldé¡¹ç›®" style="zoom:75%;" />
<p>ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘ä»¬å¯ä»¥é˜…è¯»ğŸ”<a href="https://fpm.fortran-lang.org/page/Packaging.html"><code>Packaging with fpm</code></a>å’Œ<a href="https://fpm.fortran-lang.org/page/Manifest.html"><code>Manifest reference</code></a>ï¼›å¦‚æœæˆ‘ä»¬æƒ³æˆä¸ºFPMçš„è´¡çŒ®è€…å’Œå¼€å‘è€…ï¼Œé˜…è¯»<a href="https://fpm.fortran-lang.org/index.html#fortran-package-manager-developer-documentation">FPMå¼€å‘è€…æ–‡æ¡£</a>å°†æ˜¯æœ‰å¸®åŠ©çš„ã€‚</p>
<h3 id="ä½¿ç”¨cmakeæ„å»ºä»£ç å¯é€‰"><a class="header" href="#ä½¿ç”¨cmakeæ„å»ºä»£ç å¯é€‰">ä½¿ç”¨CMakeæ„å»ºä»£ç ï¼ˆå¯é€‰ï¼‰</a></h3>
<p>CMakeæ˜¯ä¸€æ¬¾å…è´¹ã€å¼€æºã€ä¼˜ç§€çš„ä»£ç æ„å»ºç³»ç»Ÿï¼Œå®ƒçš„è·¨å¹³å°èƒ½åŠ›å¾ˆå¼ºã€æ”¯æŒå¤šç¼–è¯‘å™¨ï¼ŒåŠŸèƒ½å¼ºå¤§åŒæ—¶ä¹Ÿå…·æœ‰ä¸€å®šéš¾åº¦ã€‚<br>
æˆ‘ä»¬å¯ä»¥å‰å¾€<a href="https://cmake.org/">CMakeå®˜æ–¹ç½‘ç«™</a>é˜…è¯»<a href="https://cmake.org/documentation/">å¸®åŠ©æ–‡æ¡£</a>ã€‚</p>
<pre><code class="language-sh">pacman -Ss cmake            # æŸ¥è¯¢åå­—ä¸­å«â€œcmakeâ€å­—ç¬¦çš„åŒ…
pacman -S  ucrt64/mingw-w64-ucrt-x86_64-cmake   # å®‰è£…CMakeè½¯ä»¶
cmake  --help               # è·å–cmakeå‘½ä»¤è¡Œå‚æ•°çš„å¸®åŠ©æ–‡æ¡£
</code></pre>
<h4 id="å•ä¸ªæºæ–‡ä»¶ä»£ç "><a class="header" href="#å•ä¸ªæºæ–‡ä»¶ä»£ç ">å•ä¸ªæºæ–‡ä»¶ä»£ç </a></h4>
<p>CMakeä½¿ç”¨é…ç½®æ–‡ä»¶æ¥æ„å»ºæˆ‘ä»¬çš„ä»£ç ï¼Œå¦‚<code>CMakelists.txt</code>ã€‚å‡è®¾æˆ‘ä»¬æƒ³æ„å»ºä¸€ä¸ªâ€œHello Fortranâ€ä»£ç ï¼Œåœ¨<code>hello_fortran.f90</code>åŒä¸€æ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>CMakelists.txt</code>ï¼š</p>
<pre><code class="language-cmake">cmake_minimum_required(VERSION 3.0)                     # è®¾ç½®è¦ä½¿ç”¨CMakeçš„æœ€å°ç‰ˆæœ¬ï¼Œæ­¤å¤„å–ä¸º3.0

project(fortran_basics LANGUAGES Fortran)               # è®¾ç½®å·¥ç¨‹çš„åå­—ä¸ºfortran_basicsï¼Œå’Œç¼–è¯‘å·¥ç¨‹çš„ç¼–ç¨‹è¯­è¨€ä¸ºFortran

set(CMAKE_Fortran_MODULE_DIRECTORY
    ${CMAKE_BINARY_DIR}/modules)
file(MAKE_DIRECTORY ${CMAKE_Fortran_MODULE_DIRECTORY})  # è®¾ç½®ç¼–è¯‘å™¨ç¼–è¯‘ä»£ç ç”Ÿæˆçš„*.modæ–‡ä»¶è¢«å‚¨å­˜åœ¨ç›®æ ‡æ„å»ºæ–‡ä»¶å¤¹ä¸‹

add_compile_options(-Wall -Wextra)                      # è®¾ç½®é¢å¤–çš„ç¼–è¯‘å™¨é€‰é¡¹ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰ï¼Œæ­¤å¤„ä¸º`-Wall -Wextra`

add_executable(hello_fortran.exe hello_fortran.f90)     # è®¾ç½®å…·ä½“çš„ç¼–è¯‘å†…å®¹ï¼Œæ­¤å¤„è®¾ç½®å°†hello_fortran.f90ç¼–è¯‘æˆhello_fortran.exe
</code></pre>
<p>å½“æˆ‘ä»¬ç¼–è¯‘ä»£ç æ—¶ï¼ŒCMakeä¼šç”Ÿæˆå¾ˆå¤šå…·ä½“çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å°†å®ƒä»¬ç”Ÿæˆåœ¨ä¸€ä¸ªå«åš<code>build</code>çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥ä¿æŒæ•´é½çš„æ–‡ä»¶å¤¹å†…å®¹ã€‚</p>
<pre><code class="language-sh">mkdir build &amp;&amp; cd build     # æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹`build`ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥æ–‡ä»¶å¤¹
cmake -G &quot;MSYS Makefiles&quot; ..    # CMakeæ ¹æ®å‘½ä»¤è¡Œå‚æ•°`-G &quot;MSYS Makefiles&quot; ..`å’ŒCMakelists.txtçš„ä¿¡æ¯ç”Ÿæˆmakefiles
make                        # ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨makeæ¥ç¼–è¯‘ä»£ç äº†
./hello_fortran.exe         # ç¼–è¯‘æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä»£ç äº†
</code></pre>
<img src="images/CMake-hello_fortran.png" alt="åœ¨VS Codeä¸­ä½¿ç”¨CMake" style="zoom:75%;" />
<h4 id="å¤šä¸ªæºä»£ç æ–‡ä»¶"><a class="header" href="#å¤šä¸ªæºä»£ç æ–‡ä»¶">å¤šä¸ªæºä»£ç æ–‡ä»¶</a></h4>
<pre><code class="language-cmake">add_executable(hello_fortran.exe 
    hello_fortran.f90
    print_stars.f90)  # æˆ‘ä»¬éœ€è¦æ›´æ–°CMakelists.txtä¸­å…·ä½“çš„ç¼–è¯‘å†…å®¹ï¼Œå¢åŠ print_stars.f90ç¼–è¯‘åˆ°hello_fortran.exe
</code></pre>
<img src="images/CMake-hello_fortran2.png" alt="åœ¨VS Codeä¸­ä½¿ç”¨CMake" style="zoom:75%;" />
<h2 id="ä½¿ç”¨vs-codeè¿›è¡Œä»£ç è°ƒè¯•"><a class="header" href="#ä½¿ç”¨vs-codeè¿›è¡Œä»£ç è°ƒè¯•">ä½¿ç”¨VS Codeè¿›è¡Œä»£ç è°ƒè¯•</a></h2>
<p>è°ƒè¯•çš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯<code>write</code>åˆ°å±å¹•æˆ–æ–‡ä»¶ä¸­ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨GDBç±»çš„è½¯ä»¶æ¥è°ƒè¯•ã€‚</p>
<h3 id="ä½¿ç”¨gdbæ¥è°ƒè¯•ä»£ç "><a class="header" href="#ä½¿ç”¨gdbæ¥è°ƒè¯•ä»£ç ">ä½¿ç”¨GDBæ¥è°ƒè¯•ä»£ç </a></h3>
<p>GDBæ˜¯GNUå¼€æºçš„Debugå…è´¹è½¯ä»¶ï¼Œå¯ä»¥å‰å¾€<a href="https://www.gnu.org/software/gdb/">GDBå®˜ç½‘</a>
ä¸‹è½½<a href="https://sourceware.org/gdb/download/onlinedocs/gdb.pdf">å¸®åŠ©æ–‡æ¡£</a>ã€‚</p>
<pre><code class="language-sh">pacman -Ss gdb              # æŸ¥è¯¢åå­—ä¸­å«â€œgdbâ€å­—ç¬¦çš„åŒ…
pacman -S  ucrt64/mingw-w64-ucrt-x86_64-gdb     # å®‰è£…gdbè½¯ä»¶
gdb  --help                 # è·å–gdbå‘½ä»¤è¡Œå‚æ•°çš„å¸®åŠ©æ–‡æ¡£
</code></pre>
<p>ä½¿ç”¨GDBè½¯ä»¶çš„å‘½ä»¤è¡Œæ¨¡å¼æ›´å¼ºå¤§ï¼Œä½†ä¹Ÿå¯¹ä½¿ç”¨è€…çš„è¦æ±‚ä¹Ÿæ›´é«˜ã€‚<br>
åœ¨VS Codeä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å®‰è£…<code>GDB Debugger - Beyond</code>æ’ä»¶æ‰©å±•æ¥è¿è¡Œ<strong>å›¾å½¢åŒ–çš„GDBè°ƒè¯•æµç¨‹</strong>ã€‚</p>
<p><img src="https://dev.azure.com/coolchyni/00de68fc-20fd-4cff-8681-a0a0be966def/_apis/git/repositories/ce435a7c-1ae2-41d1-b97d-5c3f504c4c92/items?path=%2fbeyond-debug.gif&amp;versionDescriptor%5bversionOptions%5d=0&amp;versionDescriptor%5bversionType%5d=0&amp;versionDescriptor%5bversion%5d=master&amp;resolveLfs=true&amp;format=octetStream&amp;api-version=5.0" alt="GDB" /></p>
<p>ä½ éœ€è¦åšçš„æ˜¯å…ˆå®Œæ•´åœ°é˜…è¯»<a href="https://marketplace.visualstudio.com/items?itemName=coolchyni.beyond-debug">å®ƒçš„æ¦‚è¿°ğŸ“Œ</a>ï¼ˆä¸Šé¢åŠ¨å›¾æ¥è‡ªè¯¥æ¦‚è¿°é“¾æ¥ï¼‰ï¼Œ
ç„¶ååœ¨<code>GDB Debugger - Beyond</code>æ’ä»¶ç”Ÿæˆçš„<code>.vscode/launch.json</code>æ–‡ä»¶ä¸­è®¾ç½®å¥½è¾“å‡º<code>-g</code>åçš„å¯æ‰§è¡Œç¨‹åº<code>*.exe</code>ï¼Œè®¾ç½®å¥½æ–­ç‚¹ï¼Œå¯åŠ¨è°ƒè¯•æ¨¡å¼ï¼</p>
<pre><code class="language-json">{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;type&quot;: &quot;by-gdb&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;name&quot;: &quot;Launch(gdb)&quot;,
            &quot;program&quot;: &quot;./a.exe&quot;,  // è®¾ç½®å¥½è¾“å‡º`-g`çš„å«è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œç¨‹åºï¼Œæœ€å¥½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç®€å•æ˜“ç”¨ã€‚
            &quot;cwd&quot;: &quot;${workspaceRoot}&quot;
        }
    ]
}
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŸ¥æ‰¾ä»£ç BUGï¼ŒGFortranæä¾›äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„ç¼–è¯‘é€‰é¡¹ï¼Œå¯ä»¥è¿›è¡Œç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶çš„ç¤ºè­¦å’ŒæŠ¥é”™ã€‚<br></p>
<pre><code class="language-sh"># -fcheck=bounds: æ•°ç»„è¶Šç•Œæ£€æŸ¥
# -std=f2008: å¼ºåˆ¶ä½¿ç”¨Fortran2008çš„è¯­æ³•è§„èŒƒï¼Œä¿è¯ç¨‹åºè·¨ç¼–è¯‘å™¨ï¼Œè·¨å¹³å°
# -Wall: æ£€æŸ¥ä¸€äº›å¸¸è§çš„Warningï¼Œä¾‹å¦‚å˜é‡æœªä½¿ç”¨ï¼Œå˜é‡æœªåˆå§‹åŒ–ç­‰ç­‰
# ... ...
gfortran -g -fcheck=bounds -std=f2008 -Wall hello_world.f90
</code></pre>
<p>æˆ‘ä»¬æ¨èä½¿ç”¨FPMè½¯ä»¶æ¥æ„å»ºä»£ç ï¼ŒFPMé»˜è®¤ä¼šå¯ç”¨ä¸€äº›ç¼–è¯‘é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œ</p>
<pre><code>-Wall -Wextra -Wimplicit-interface -fPIC -fmax-errors=1 -g -fcheck=bounds -fcoarray=single
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../Fortran-Programming-in-Windows/Path-in-Windows.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../Fortran-Programming-in-Windows/use-OneAPI-in-Windows.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../Fortran-Programming-in-Windows/Path-in-Windows.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../Fortran-Programming-in-Windows/use-OneAPI-in-Windows.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
